version: '3.8'

services:
  kite-server:
    build: .
    restart: always
    volumes:
    - /data/kite-server:/kite-server/config
    ports:
      - target: 9443
        published: 9443
        protocol: tcp
        mode: host
      - target: 9080
        published: 9080
        protocol: tcp
        mode: host
    depends_on:
      - redis

  redis:
    image: redis:alpine
    restart: always
    volumes:
    - /data/redis:/data
    command: ["redis-server", "--appendonly", "yes", "--requirepass", "ch4ng3-m3"]

volumes:
  kite-server:
  redis:
